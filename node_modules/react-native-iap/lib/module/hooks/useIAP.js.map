{"version":3,"names":["useCallback","useEffect","useState","useRef","Platform","initConnection","purchaseErrorListener","purchaseUpdatedListener","promotedProductListenerIOS","getAvailablePurchases","finishTransaction","finishTransactionInternal","requestPurchase","requestPurchaseInternal","fetchProducts","validateReceipt","validateReceiptInternal","getActiveSubscriptions","hasActiveSubscriptions","restorePurchases","restorePurchasesTopLevel","getPromotedProductIOS","requestPurchaseOnPromotedProductIOS","ErrorCode","normalizeErrorCodeFromNative","useIAP","options","connected","setConnected","products","setProducts","promotedProductsIOS","subscriptions","setSubscriptions","availablePurchases","setAvailablePurchases","promotedProductIOS","setPromotedProductIOS","promotedProductIdIOS","activeSubscriptions","setActiveSubscriptions","optionsRef","connectedRef","mergeWithDuplicateCheck","existingItems","newItems","getKey","merged","forEach","newItem","isDuplicate","some","existingItem","push","current","subscriptionsRef","subscriptionsRefState","getProductsInternal","skus","result","type","prevProducts","product","id","error","console","getSubscriptionsInternal","prevSubscriptions","subscription","fetchProductsInternal","params","warn","getAvailablePurchasesInternal","_skus","alsoPublishToEventListenerIOS","onlyIncludeActiveItemsIOS","getActiveSubscriptionsInternal","subscriptionIds","hasActiveSubscriptionsInternal","purchase","isConsumable","err","requestObj","sku","androidOptions","initIapWithSubscriptions","purchaseUpdate","e","onPurchaseSuccess","purchaseError","mappedError","code","message","productId","undefined","InitConnection","onPurchaseError","OS","onPromotedProductIOS","remove","currentSubscriptions","purchases","getProducts","getSubscriptions"],"sourceRoot":"../../../src","sources":["hooks/useIAP.ts"],"mappings":"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","ignoreList":[]}
